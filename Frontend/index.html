<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homeserver Control Panel</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <i class="fas fa-server"></i>
                <h2>Homeserver</h2>
            </div>
            <nav class="nav-menu">
                <a href="#dashboard" class="nav-item active" data-section="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#dns" class="nav-item" data-section="dns">
                    <i class="fas fa-network-wired"></i>
                    <span>DNS Server</span>
                </a>
                <a href="#adblock" class="nav-item" data-section="adblock">
                    <i class="fas fa-shield-alt"></i>
                    <span>AdBlock/Pi-hole</span>
                </a>
                <a href="#gameserver" class="nav-item" data-section="gameserver">
                    <i class="fas fa-gamepad"></i>
                    <span>Gameserver</span>
                </a>
                <a href="#webspace" class="nav-item" data-section="webspace">
                    <i class="fas fa-globe"></i>
                    <span>Webspaces</span>
                </a>
                <a href="#apache" class="nav-item" data-section="apache">
                    <i class="fas fa-cogs"></i>
                    <span>Apache2</span>
                </a>
                <a href="#terminal" class="nav-item" data-section="terminal">
                    <i class="fas fa-terminal"></i>
                    <span>Terminal</span>
                </a>
                <div style="border-top: 1px solid var(--border); margin: 1rem 0; padding-top: 1rem;">
                    <p style="padding: 0 1.5rem; color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; margin-bottom: 0.5rem;">Erweitert</p>
                </div>
                <a href="#filemanager" class="nav-item" data-section="filemanager">
                    <i class="fas fa-folder-open"></i>
                    <span>File Manager <span class="wip-badge">WIP</span></span>
                </a>
                <a href="#notifications" class="nav-item" data-section="notifications">
                    <i class="fas fa-bell"></i>
                    <span>Notifikationen <span class="wip-badge">WIP</span></span>
                </a>
                <a href="#backups" class="nav-item" data-section="backups">
                    <i class="fas fa-save"></i>
                    <span>Backups <span class="wip-badge">WIP</span></span>
                </a>
                <a href="#scheduler" class="nav-item" data-section="scheduler">
                    <i class="fas fa-clock"></i>
                    <span>Scheduler <span class="wip-badge">WIP</span></span>
                </a>
                <a href="#docker" class="nav-item" data-section="docker">
                    <i class="fab fa-docker"></i>
                    <span>Docker <span class="wip-badge">WIP</span></span>
                </a>
                <div style="border-top: 1px solid var(--border); margin: 1rem 0; padding-top: 1rem;"></div>
                <a href="#settings" class="nav-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Einstellungen</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1 id="page-title">Dashboard</h1>
                <div class="header-actions">
                    <div class="system-status" id="system-status-badge" title="Verbindungsstatus zum Backend">
                        <span class="status-indicator">
                            <span class="status-dot online"></span>
                            <span class="status-pulse"></span>
                        </span>
                        <span class="status-text">Online</span>
                    </div>
                    <button class="btn-icon" onclick="refreshAll()" title="Aktualisieren">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <!-- Theme Switcher -->
                <div class="theme-switcher-container">
                    <label for="theme-select">
                        <i class="fas fa-palette"></i> Design-Modus:
                    </label>
                    <select id="theme-select" class="theme-dropdown" onchange="switchDashboardTheme(this.value)">
                        <option value="classic">Classic Mode</option>
                        <option value="quantum">Quantum Vision</option>
                    </select>
                </div>

                <!-- Classic Design -->
                <div id="dashboard-classic" class="dashboard-design active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-microchip"></i>
                            <div class="stat-info">
                                <h3>CPU</h3>
                                <p class="stat-value" id="cpu-usage">--%</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-memory"></i>
                            <div class="stat-info">
                                <h3>RAM</h3>
                                <p class="stat-value" id="ram-usage">--%</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-hdd"></i>
                            <div class="stat-info">
                                <h3>Disk</h3>
                                <p class="stat-value" id="disk-usage">--%</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-thermometer-half"></i>
                            <div class="stat-info">
                                <h3>Temp</h3>
                                <p class="stat-value" id="temp">--°C</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quantum Vision Design -->
                <div id="dashboard-quantum" class="dashboard-design">
                    <div class="quantum-header">
                        <h2><i class="fas fa-atom"></i> SYSTEM LOAD</h2>
                        <div class="quantum-subtitle">Real-time Performance Monitoring</div>
                    </div>
                    
                    <div class="quantum-stats-container">
                        <div class="quantum-stat-card" data-type="cpu">
                            <div class="quantum-circle-container">
                                <svg class="quantum-circle" viewBox="0 0 200 200">
                                    <defs>
                                        <linearGradient id="cpu-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#0080ff;stop-opacity:1" />
                                        </linearGradient>
                                        <filter id="glow">
                                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                            <feMerge>
                                                <feMergeNode in="coloredBlur"/>
                                                <feMergeNode in="SourceGraphic"/>
                                            </feMerge>
                                        </filter>
                                    </defs>
                                    <circle class="quantum-circle-bg" cx="100" cy="100" r="85"/>
                                    <circle class="quantum-circle-progress" id="cpu-circle" cx="100" cy="100" r="85" 
                                            stroke="url(#cpu-gradient)" filter="url(#glow)"/>
                                </svg>
                                <div class="quantum-icon-container">
                                    <div class="quantum-waveform" id="cpu-waveform"></div>
                                </div>
                                <div class="quantum-value" id="cpu-quantum-value">0%</div>
                            </div>
                            <div class="quantum-label">CPU</div>
                        </div>

                        <div class="quantum-stat-card" data-type="ram">
                            <div class="quantum-circle-container">
                                <svg class="quantum-circle" viewBox="0 0 200 200">
                                    <defs>
                                        <linearGradient id="ram-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#00ff88;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#00cc44;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <circle class="quantum-circle-bg" cx="100" cy="100" r="85"/>
                                    <circle class="quantum-circle-progress" id="ram-circle" cx="100" cy="100" r="85" 
                                            stroke="url(#ram-gradient)" filter="url(#glow)"/>
                                </svg>
                                <div class="quantum-icon-container">
                                    <div class="quantum-particles" id="ram-particles"></div>
                                </div>
                                <div class="quantum-value" id="ram-quantum-value">0%</div>
                            </div>
                            <div class="quantum-label">RAM</div>
                        </div>

                        <div class="quantum-stat-card" data-type="disk">
                            <div class="quantum-circle-container">
                                <svg class="quantum-circle" viewBox="0 0 200 200">
                                    <defs>
                                        <linearGradient id="disk-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#ff6600;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#ff3300;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <circle class="quantum-circle-bg" cx="100" cy="100" r="85"/>
                                    <circle class="quantum-circle-progress" id="disk-circle" cx="100" cy="100" r="85" 
                                            stroke="url(#disk-gradient)" filter="url(#glow)"/>
                                </svg>
                                <div class="quantum-icon-container">
                                    <div class="quantum-spiral" id="disk-spiral"></div>
                                </div>
                                <div class="quantum-value" id="disk-quantum-value">0%</div>
                            </div>
                            <div class="quantum-label">DISK</div>
                        </div>

                        <div class="quantum-stat-card" data-type="temp">
                            <div class="quantum-circle-container">
                                <svg class="quantum-circle" viewBox="0 0 200 200">
                                    <defs>
                                        <linearGradient id="temp-gradient" x1="0%" y1="100%" x2="0%" y2="0%">
                                            <stop offset="0%" style="stop-color:#ff0066;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#ff3388;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <circle class="quantum-circle-bg" cx="100" cy="100" r="85"/>
                                    <circle class="quantum-circle-progress" id="temp-circle" cx="100" cy="100" r="85" 
                                            stroke="url(#temp-gradient)" filter="url(#glow)"/>
                                </svg>
                                <div class="quantum-icon-container">
                                    <div class="quantum-thermometer" id="temp-thermometer"></div>
                                </div>
                                <div class="quantum-value" id="temp-quantum-value">0°C</div>
                            </div>
                            <div class="quantum-label">TEMP</div>
                        </div>
                    </div>

                    <!-- Quantum Background Effects -->
                    <div class="quantum-bg-effects">
                        <div class="quantum-grid"></div>
                        <canvas id="quantum-canvas" class="quantum-canvas"></canvas>
                    </div>
                </div>

                <div class="services-grid">
                    <div class="card">
                        <h3>Aktive Services</h3>
                        <div id="services-list" class="services-list">
                            <div class="service-item">
                                <span class="service-name">DNS Server</span>
                                <span class="status-badge running">Running</span>
                            </div>
                            <div class="service-item">
                                <span class="service-name">Apache2</span>
                                <span class="status-badge running">Running</span>
                            </div>
                            <div class="service-item">
                                <span class="service-name">Pi-hole</span>
                                <span class="status-badge running">Running</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>System Steuerung</h3>
                        <div class="service-controls">
                            <button class="btn btn-warning" onclick="confirmPowerAction('suspend')">
                                <i class="fas fa-moon"></i>
                                Ruhemodus
                            </button>
                            <button class="btn btn-info" onclick="confirmPowerAction('reboot')">
                                <i class="fas fa-redo"></i>
                                Neustart
                            </button>
                            <button class="btn btn-danger" onclick="confirmPowerAction('shutdown')">
                                <i class="fas fa-power-off"></i>
                                Herunterfahren
                            </button>
                        </div>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label>Wake-on-LAN (MAC-Adresse)</label>
                            <div class="input-group">
                                <input type="text" id="wol-mac" placeholder="00:11:22:33:44:55" value="00:11:22:33:44:55">
                                <button class="btn btn-success" onclick="wakeSystem()">
                                    <i class="fas fa-sun"></i>
                                    Aufwecken
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- DNS Section -->
            <section id="dns" class="content-section">
                <div class="card">
                    <h3>DNS Server Verwaltung</h3>
                    <div class="service-controls">
                        <button class="btn btn-success" onclick="controlService('dns', 'start')">
                            <i class="fas fa-play"></i> Start
                        </button>
                        <button class="btn btn-warning" onclick="controlService('dns', 'restart')">
                            <i class="fas fa-redo"></i> Restart
                        </button>
                        <button class="btn btn-danger" onclick="controlService('dns', 'stop')">
                            <i class="fas fa-stop"></i> Stop
                        </button>
                        <button class="btn btn-info" onclick="getServiceStatus('dns')">
                            <i class="fas fa-info-circle"></i> Status
                        </button>
                    </div>
                    <div class="service-status" id="dns-status"></div>
                </div>

                <div class="card">
                    <h3>DNS Einträge</h3>
                    <div class="input-group">
                        <input type="text" id="dns-domain" placeholder="Domain (z.B. server.local)">
                        <input type="text" id="dns-ip" placeholder="IP-Adresse">
                        <button class="btn btn-primary" onclick="addDNSEntry()">
                            <i class="fas fa-plus"></i> Hinzufügen
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="dns-table">
                            <thead>
                                <tr>
                                    <th>Domain</th>
                                    <th>IP-Adresse</th>
                                    <th>Aktionen</th>
                                </tr>
                            </thead>
                            <tbody id="dns-entries">
                                <!-- Dynamic content -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- AdBlock Section -->
            <section id="adblock" class="content-section">
                <div class="card">
                    <h3>Pi-hole / AdBlock Verwaltung</h3>
                    <div class="service-controls">
                        <button class="btn btn-success" onclick="controlService('pihole', 'enable')">
                            <i class="fas fa-shield-alt"></i> Enable
                        </button>
                        <button class="btn btn-danger" onclick="controlService('pihole', 'disable')">
                            <i class="fas fa-ban"></i> Disable
                        </button>
                        <button class="btn btn-info" onclick="getPiholeStats()">
                            <i class="fas fa-chart-bar"></i> Statistiken
                        </button>
                    </div>
                    <div class="pihole-stats" id="pihole-stats">
                        <div class="stat-item">
                            <h4>Geblockte Queries</h4>
                            <p id="blocked-queries">--</p>
                        </div>
                        <div class="stat-item">
                            <h4>Total Queries</h4>
                            <p id="total-queries">--</p>
                        </div>
                        <div class="stat-item">
                            <h4>Block Rate</h4>
                            <p id="block-rate">--%</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Blocklist Verwaltung</h3>
                    <div class="input-group">
                        <input type="text" id="blocklist-url" placeholder="Blocklist URL">
                        <button class="btn btn-primary" onclick="addBlocklist()">
                            <i class="fas fa-plus"></i> Hinzufügen
                        </button>
                    </div>
                    <button class="btn btn-warning" onclick="updateGravity()">
                        <i class="fas fa-sync"></i> Update Gravity
                    </button>
                </div>
            </section>

            <!-- Gameserver Section -->
            <section id="gameserver" class="content-section">
                <div class="card">
                    <h3>Gameserver Verwaltung</h3>
                    <button class="btn btn-primary" onclick="showAddGameserverModal()">
                        <i class="fas fa-plus"></i> Neuer Gameserver
                    </button>
                </div>

                <div class="gameserver-grid" id="gameserver-list">
                    <!-- Gameserver cards will be loaded dynamically -->
                </div>
            </section>

            <!-- Webspace Section -->
            <section id="webspace" class="content-section">
                <div class="card">
                    <h3>Webspace Verwaltung</h3>
                    <button class="btn btn-primary" onclick="showAddWebspaceModal()">
                        <i class="fas fa-plus"></i> Neuer Webspace
                    </button>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Domain</th>
                                <th>Pfad</th>
                                <th>Status</th>
                                <th>Aktionen</th>
                            </tr>
                        </thead>
                        <tbody id="webspace-list">
                            <tr>
                                <td>example.local</td>
                                <td>/var/www/example</td>
                                <td><span class="status-badge running">Active</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" onclick="editWebspace('example.local')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="deleteWebspace('example.local')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Apache Section -->
            <section id="apache" class="content-section">
                <div class="card">
                    <h3>Apache2 Verwaltung</h3>
                    <div class="service-controls">
                        <button class="btn btn-success" onclick="controlService('apache2', 'start')">
                            <i class="fas fa-play"></i> Start
                        </button>
                        <button class="btn btn-warning" onclick="controlService('apache2', 'restart')">
                            <i class="fas fa-redo"></i> Restart
                        </button>
                        <button class="btn btn-danger" onclick="controlService('apache2', 'stop')">
                            <i class="fas fa-stop"></i> Stop
                        </button>
                        <button class="btn btn-info" onclick="getServiceStatus('apache2')">
                            <i class="fas fa-info-circle"></i> Status
                        </button>
                    </div>
                    <div class="service-status" id="apache-status"></div>
                </div>

                <div class="card">
                    <h3>Apache Module</h3>
                    <div class="modules-grid" id="apache-modules">
                        <!-- Dynamic content -->
                    </div>
                </div>

                <div class="card">
                    <h3>Apache Logs</h3>
                    <div class="log-viewer" id="apache-logs">
                        <pre>Loading logs...</pre>
                    </div>
                    <button class="btn btn-info" onclick="loadApacheLogs()">
                        <i class="fas fa-sync"></i> Logs aktualisieren
                    </button>
                </div>
            </section>

            <!-- Terminal Section -->
            <section id="terminal" class="content-section">
                <!-- SSH Connection Form -->
                <div class="card" id="ssh-login-card">
                    <h3><i class="fas fa-network-wired"></i> SSH Verbindung</h3>
                    <div class="form-group">
                        <label>Host / IP-Adresse</label>
                        <input type="text" id="ssh-host" placeholder="192.168.0.205" value="192.168.0.205">
                    </div>
                    <div class="form-group">
                        <label>Port</label>
                        <input type="number" id="ssh-port" placeholder="22" value="22">
                    </div>
                    <div class="form-group">
                        <label>Benutzername</label>
                        <input type="text" id="ssh-username" placeholder="root">
                    </div>
                    <div class="form-group">
                        <label>Passwort</label>
                        <input type="password" id="ssh-password" placeholder="••••••••">
                    </div>
                    <div class="service-controls">
                        <button class="btn btn-success" onclick="connectSSH()">
                            <i class="fas fa-plug"></i>
                            Verbinden
                        </button>
                    </div>
                    <div id="ssh-connection-status"></div>
                </div>

                <!-- Terminal Interface (hidden until connected) -->
                <div class="card terminal-card" id="terminal-interface" style="display: none;">
                    <div class="terminal-header">
                        <div>
                            <h3><i class="fas fa-terminal"></i> Server Terminal</h3>
                            <small id="terminal-connection-info" style="color: var(--text-secondary);"></small>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-sm btn-info" onclick="clearTerminal()">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="disconnectSSH()">
                                <i class="fas fa-times"></i> Trennen
                            </button>
                        </div>
                    </div>
                    <div class="terminal-container" id="terminal-output"></div>
                    <div class="terminal-input-group">
                        <span class="terminal-prompt" id="terminal-prompt">$</span>
                        <input type="text" id="terminal-input" class="terminal-input" placeholder="Befehl eingeben..." onkeypress="handleTerminalInput(event)">
                        <button class="btn btn-success" onclick="executeTerminalCommand()">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- File Manager Section (WIP) -->
            <section id="filemanager" class="content-section">
                <div class="filemanager-container">
                    <!-- File Manager Toolbar -->
                    <div class="filemanager-toolbar">
                        <div class="toolbar-left">
                            <button class="btn btn-primary" onclick="showUploadModal()">
                                <i class="fas fa-upload"></i>
                                Hochladen
                            </button>
                            <button class="btn btn-success" onclick="showCreateFolderModal()">
                                <i class="fas fa-folder-plus"></i>
                                Neuer Ordner
                            </button>
                            <button class="btn btn-info" onclick="refreshFileManager()">
                                <i class="fas fa-sync-alt"></i>
                                Aktualisieren
                            </button>
                        </div>
                        <div class="toolbar-right">
                            <div class="view-mode">
                                <button class="view-btn active" data-view="grid" onclick="switchView('grid')">
                                    <i class="fas fa-th"></i>
                                </button>
                                <button class="view-btn" data-view="list" onclick="switchView('list')">
                                    <i class="fas fa-list"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Breadcrumb Navigation -->
                    <div class="filemanager-breadcrumb">
                        <i class="fas fa-folder-open"></i>
                        <div id="breadcrumb-path"></div>
                    </div>

                    <!-- File Drop Zone -->
                    <div id="file-drop-zone" class="file-drop-zone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Dateien hierher ziehen oder klicken zum Hochladen</p>
                        <input type="file" id="file-input" multiple style="display: none;">
                    </div>

                    <!-- File Grid/List -->
                    <div id="file-grid" class="file-grid">
                        <!-- Files will be loaded here -->
                    </div>

                    <!-- Context Menu -->
                    <div id="file-context-menu" class="context-menu" style="display: none;">
                        <div class="context-item" onclick="contextAction('open')">
                            <i class="fas fa-folder-open"></i> Öffnen
                        </div>
                        <div class="context-item" onclick="contextAction('edit')">
                            <i class="fas fa-edit"></i> Bearbeiten
                        </div>
                        <div class="context-item" onclick="contextAction('download')">
                            <i class="fas fa-download"></i> Herunterladen
                        </div>
                        <div class="context-item" onclick="contextAction('rename')">
                            <i class="fas fa-i-cursor"></i> Umbenennen
                        </div>
                        <div class="context-divider"></div>
                        <div class="context-item danger" onclick="contextAction('delete')">
                            <i class="fas fa-trash"></i> Löschen
                        </div>
                    </div>
                </div>
            </section>

            <!-- Notifications Section (WIP) -->
            <section id="notifications" class="content-section">
                <div class="card wip-card">
                    <div class="wip-header">
                        <i class="fas fa-bell" style="font-size: 3rem; color: var(--warning); margin-bottom: 1rem;"></i>
                        <h2>Notifikations-System</h2>
                        <span class="wip-badge-large">Work in Progress</span>
                    </div>
                    <div class="wip-content">
                        <p>Das Notifikations-System wird Sie über wichtige Ereignisse informieren:</p>
                        <ul class="wip-features">
                            <li><i class="fas fa-check"></i> Discord Bot Integration</li>
                            <li><i class="fas fa-check"></i> Telegram Bot Integration</li>
                            <li><i class="fas fa-check"></i> Email-Benachrichtigungen</li>
                            <li><i class="fas fa-check"></i> Alerts bei Server-Crashes</li>
                            <li><i class="fas fa-check"></i> CPU/RAM Überlastungs-Warnungen</li>
                            <li><i class="fas fa-check"></i> Disk Space Warnungen</li>
                            <li><i class="fas fa-check"></i> Fehlgeschlagene Backups</li>
                            <li><i class="fas fa-check"></i> SSH-Login Benachrichtigungen</li>
                        </ul>
                        <p class="wip-eta"><i class="fas fa-clock"></i> Voraussichtliche Implementierung: Q1 2026</p>
                    </div>
                </div>
            </section>

            <!-- Backups Section (WIP) -->
            <section id="backups" class="content-section">
                <div class="card wip-card">
                    <div class="wip-header">
                        <i class="fas fa-save" style="font-size: 3rem; color: var(--success); margin-bottom: 1rem;"></i>
                        <h2>Backup-System</h2>
                        <span class="wip-badge-large">Work in Progress</span>
                    </div>
                    <div class="wip-content">
                        <p>Automatische Backups für maximale Datensicherheit:</p>
                        <ul class="wip-features">
                            <li><i class="fas fa-check"></i> Automatische Gameserver-Backups</li>
                            <li><i class="fas fa-check"></i> Konfigurationsdatei-Backups</li>
                            <li><i class="fas fa-check"></i> Zeitgesteuerte Backups (täglich/wöchentlich)</li>
                            <li><i class="fas fa-check"></i> One-Click Restore</li>
                            <li><i class="fas fa-check"></i> Backup auf externe Festplatte/NAS</li>
                            <li><i class="fas fa-check"></i> Cloud-Backup (Dropbox, Google Drive)</li>
                            <li><i class="fas fa-check"></i> Inkrementelle Backups</li>
                            <li><i class="fas fa-check"></i> Backup-Verschlüsselung</li>
                        </ul>
                        <p class="wip-eta"><i class="fas fa-clock"></i> Voraussichtliche Implementierung: Q1 2026</p>
                    </div>
                </div>
            </section>

            <!-- Scheduler Section (WIP) -->
            <section id="scheduler" class="content-section">
                <div class="card wip-card">
                    <div class="wip-header">
                        <i class="fas fa-clock" style="font-size: 3rem; color: var(--info); margin-bottom: 1rem;"></i>
                        <h2>Task Scheduler</h2>
                        <span class="wip-badge-large">Work in Progress</span>
                    </div>
                    <div class="wip-content">
                        <p>Automatisieren Sie wiederkehrende Aufgaben:</p>
                        <ul class="wip-features">
                            <li><i class="fas fa-check"></i> Cron-Jobs über GUI erstellen</li>
                            <li><i class="fas fa-check"></i> Gameserver Auto-Restart bei Crash</li>
                            <li><i class="fas fa-check"></i> Automatische System-Updates</li>
                            <li><i class="fas fa-check"></i> Gameserver-Updates automatisch</li>
                            <li><i class="fas fa-check"></i> Geplante Neustarts (z.B. 4 Uhr morgens)</li>
                            <li><i class="fas fa-check"></i> Backup-Scheduler</li>
                            <li><i class="fas fa-check"></i> Custom Scripts ausführen</li>
                            <li><i class="fas fa-check"></i> Task-Historie & Logs</li>
                        </ul>
                        <p class="wip-eta"><i class="fas fa-clock"></i> Voraussichtliche Implementierung: Q2 2026</p>
                    </div>
                </div>
            </section>

            <!-- Docker Section (WIP) -->
            <section id="docker" class="content-section">
                <div class="card wip-card">
                    <div class="wip-header">
                        <i class="fab fa-docker" style="font-size: 3rem; color: #2496ED; margin-bottom: 1rem;"></i>
                        <h2>Docker Management</h2>
                        <span class="wip-badge-large">Work in Progress</span>
                    </div>
                    <div class="wip-content">
                        <p>Verwalten Sie Docker Container direkt über das Panel:</p>
                        <ul class="wip-features">
                            <li><i class="fas fa-check"></i> Container erstellen/starten/stoppen</li>
                            <li><i class="fas fa-check"></i> Portainer Integration</li>
                            <li><i class="fas fa-check"></i> Vorgefertigte Templates (Nextcloud, Plex, Jellyfin)</li>
                            <li><i class="fas fa-check"></i> Docker Compose Support</li>
                            <li><i class="fas fa-check"></i> Resource-Limits pro Container</li>
                            <li><i class="fas fa-check"></i> Container-Logs live anzeigen</li>
                            <li><i class="fas fa-check"></i> Volume Management</li>
                            <li><i class="fas fa-check"></i> Network Configuration</li>
                        </ul>
                        <p class="wip-eta"><i class="fas fa-clock"></i> Voraussichtliche Implementierung: Q2 2026</p>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <div class="card">
                    <h3><i class="fas fa-cog"></i> Systemeinstellungen</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                        Konfigurieren Sie die Verbindungseinstellungen für Ihren Linux-Server. Diese Daten werden verschlüsselt gespeichert und für automatische sudo-Befehle verwendet.
                    </p>
                </div>

                <div class="card">
                    <h3><i class="fas fa-server"></i> Linux Server Credentials</h3>
                    <div id="credentials-status" style="margin-bottom: 1rem;"></div>
                    
                    <div class="form-group">
                        <label for="linux-username">
                            <i class="fas fa-user"></i> Benutzername
                        </label>
                        <input type="text" id="linux-username" placeholder="z.B. patty" autocomplete="username">
                        <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                            Der Benutzername auf Ihrem Linux-Server
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="linux-password">
                            <i class="fas fa-lock"></i> Passwort
                        </label>
                        <input type="password" id="linux-password" placeholder="Ihr Linux-Passwort" autocomplete="current-password">
                        <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                            Wird für sudo-Befehle benötigt (verschlüsselt gespeichert)
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="linux-host">
                            <i class="fas fa-network-wired"></i> Server-Adresse
                        </label>
                        <input type="text" id="linux-host" placeholder="192.168.0.205 oder homeserver.local" value="192.168.0.205">
                        <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                            IP-Adresse oder Hostname Ihres Servers
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="linux-port">
                            <i class="fas fa-plug"></i> SSH Port
                        </label>
                        <input type="number" id="linux-port" placeholder="22" value="22" min="1" max="65535">
                        <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                            Standard: 22
                        </small>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button class="btn btn-success" onclick="saveLinuxCredentials()">
                            <i class="fas fa-save"></i> Speichern
                        </button>
                        <button class="btn btn-info" onclick="testLinuxConnection()">
                            <i class="fas fa-plug"></i> Verbindung testen
                        </button>
                        <button class="btn btn-danger" onclick="deleteLinuxCredentials()">
                            <i class="fas fa-trash"></i> Löschen
                        </button>
                    </div>
                </div>

                <div class="card">
                    <h3><i class="fas fa-shield-alt"></i> Sicherheitshinweise</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.8;">
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 0.5rem;"></i> Ihre Credentials werden verschlüsselt im LocalStorage gespeichert</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 0.5rem;"></i> Passwörter werden niemals im Klartext übertragen</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 0.5rem;"></i> Automatisch für Terminal und sudo-Befehle verwendet</li>
                        <li><i class="fas fa-check" style="color: var(--success); margin-right: 0.5rem;"></i> MAC-Adresse wird ebenfalls lokal gespeichert</li>
                        <li><i class="fas fa-info-circle" style="color: var(--info); margin-right: 0.5rem;"></i> Verwenden Sie einen dedizierten Server-Account</li>
                        <li><i class="fas fa-info-circle" style="color: var(--info); margin-right: 0.5rem;"></i> Ändern Sie das Passwort regelmäßig</li>
                    </ul>
                    
                    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(239, 68, 68, 0.1); border-left: 3px solid var(--danger); border-radius: 8px;">
                        <h4 style="color: var(--danger); margin-bottom: 0.5rem;">
                            <i class="fas fa-exclamation-triangle"></i> Alle gespeicherten Daten löschen
                        </h4>
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Löscht alle verschlüsselten Zugangsdaten und die MAC-Adresse aus dem LocalStorage.
                        </p>
                        <button class="btn btn-danger" onclick="clearAllSavedData()">
                            <i class="fas fa-trash-alt"></i> Alle Daten löschen
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for Adding Gameserver -->
    <div id="addGameserverModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeModal('addGameserverModal')">&times;</span>
            <h3>Neuer Gameserver</h3>
            
            <div id="gameserver-form">
                <div class="form-group">
                    <label>Server Typ</label>
                    <select id="gameserver-type">
                        <option value="minecraft-java">Minecraft Java Edition</option>
                        <option value="minecraft-bedrock">Minecraft Bedrock Edition</option>
                        <option value="beammp">BeamMP (BeamNG.drive)</option>
                        <option value="valheim">Valheim</option>
                        <option value="battlefield2-aix">Battlefield 2 AIX Mod</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Server Name</label>
                    <input type="text" id="gameserver-name" placeholder="Mein Server">
                </div>
                <div class="form-group">
                    <label>Port</label>
                    <input type="number" id="gameserver-port" placeholder="25565">
                </div>
                <div class="form-group">
                    <label>RAM (GB)</label>
                    <input type="number" id="gameserver-ram" placeholder="4" min="1" max="32">
                </div>
                <button class="btn btn-primary" onclick="addGameserver()">
                    <i class="fas fa-download"></i> Herunterladen & Installieren
                </button>
            </div>
            
            <!-- Installation Progress -->
            <div id="gameserver-install-progress" style="display: none;">
                <div class="install-progress">
                    <div class="install-header">
                        <div class="install-icon" id="install-icon">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        <h4 id="install-title">Installation läuft...</h4>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div id="install-progress-fill" class="progress-fill"></div>
                        </div>
                        <span class="progress-text" id="install-progress-percent">0%</span>
                    </div>
                    
                    <div class="install-status">
                        <div class="status-message" id="install-status-message">
                            <i class="fas fa-circle-notch fa-spin"></i>
                            <span>Bereite Installation vor...</span>
                        </div>
                    </div>
                    
                    <div class="install-error" id="install-error" style="display: none;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div class="error-content">
                            <h5>Fehler bei der Installation</h5>
                            <p id="install-error-message"></p>
                        </div>
                    </div>
                    
                    <div class="install-actions" id="install-actions" style="display: none;">
                        <button class="btn btn-success" onclick="closeInstallModal()">
                            <i class="fas fa-check"></i> Fertig
                        </button>
                        <button class="btn btn-secondary" onclick="closeModal('addGameserverModal'); loadGameservers();">
                            <i class="fas fa-list"></i> Zur Übersicht
                        </button>
                    </div>
                    
                    <div class="install-actions" id="install-error-actions" style="display: none;">
                        <button class="btn btn-danger" onclick="closeInstallModal()">
                            <i class="fas fa-times"></i> Schließen
                        </button>
                        <button class="btn btn-secondary" onclick="retryInstallation()">
                            <i class="fas fa-redo"></i> Erneut versuchen
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Config Editor -->
    <div id="configEditorModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeModal('configEditorModal')">&times;</span>
            <h3>
                <i class="fas fa-cog"></i> Konfiguration bearbeiten: <span id="config-server-name"></span>
            </h3>
            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                Datei: <span id="config-file-name"></span>
            </p>
            <div class="config-editor">
                <textarea id="config-content" spellcheck="false"></textarea>
            </div>
            <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
                <button class="btn btn-success" onclick="saveConfig()">
                    <i class="fas fa-save"></i> Speichern
                </button>
                <button class="btn btn-secondary" onclick="closeModal('configEditorModal')">
                    <i class="fas fa-times"></i> Abbrechen
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Server Console -->
    <div id="serverConsoleModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeModal('serverConsoleModal')">&times;</span>
            <h3>
                <i class="fas fa-terminal"></i> Server Console: <span id="console-server-name"></span>
            </h3>
            <div class="server-console">
                <div class="console-output" id="console-output"></div>
                <div class="console-input-area">
                    <input type="text" id="console-command-input" placeholder="Befehl eingeben..." 
                           onkeydown="if(event.key === 'Enter') sendConsoleCommand()">
                    <button class="btn btn-primary btn-sm" onclick="sendConsoleCommand()">
                        <i class="fas fa-paper-plane"></i> Senden
                    </button>
                </div>
            </div>
            <div style="margin-top: 1rem;">
                <button class="btn btn-secondary btn-sm" onclick="refreshConsole()">
                    <i class="fas fa-sync"></i> Aktualisieren
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Server Error Logs -->
    <div id="serverErrorLogModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeModal('serverErrorLogModal')">&times;</span>
            <div class="error-log-header">
                <div>
                    <h3>
                        <i class="fas fa-exclamation-triangle"></i> Server-Logs: <span id="error-log-server-name"></span>
                    </h3>
                    <p id="error-log-last-error" style="color: var(--danger); margin-top: 0.5rem;"></p>
                </div>
                <button class="btn btn-secondary btn-sm" onclick="refreshErrorLog()">
                    <i class="fas fa-sync"></i> Aktualisieren
                </button>
            </div>
            <div class="error-log-viewer">
                <pre id="error-log-content">Logs werden geladen...</pre>
            </div>
            <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="closeModal('serverErrorLogModal')">
                    <i class="fas fa-times"></i> Schließen
                </button>
                <button class="btn btn-warning" onclick="retryStartServer()">
                    <i class="fas fa-redo"></i> Server erneut starten
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Adding Webspace -->
    <div id="addWebspaceModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addWebspaceModal')">&times;</span>
            <h3>Neuer Webspace</h3>
            <div class="form-group">
                <label>Domain</label>
                <input type="text" id="webspace-domain" placeholder="example.local">
            </div>
            <div class="form-group">
                <label>Pfad</label>
                <input type="text" id="webspace-path" placeholder="/var/www/example">
            </div>
            <button class="btn btn-primary" onclick="addWebspace()">Erstellen</button>
        </div>
    </div>

    <!-- Modal for File Upload -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('uploadModal')">&times;</span>
            <h3><i class="fas fa-upload"></i> Datei hochladen</h3>
            <div class="upload-area">
                <input type="file" id="upload-file-input" multiple>
                <p style="color: var(--text-secondary); margin-top: 1rem;">
                    Wählen Sie eine oder mehrere Dateien zum Hochladen
                </p>
            </div>
            <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="uploadFiles()">
                    <i class="fas fa-upload"></i> Hochladen
                </button>
                <button class="btn btn-secondary" onclick="closeModal('uploadModal')">Abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Modal for Create Folder -->
    <div id="createFolderModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('createFolderModal')">&times;</span>
            <h3><i class="fas fa-folder-plus"></i> Neuer Ordner</h3>
            <div class="form-group">
                <label>Ordnername</label>
                <input type="text" id="new-folder-name" placeholder="Mein Ordner">
            </div>
            <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
                <button class="btn btn-success" onclick="createFolder()">
                    <i class="fas fa-check"></i> Erstellen
                </button>
                <button class="btn btn-secondary" onclick="closeModal('createFolderModal')">Abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Modal for Rename -->
    <div id="renameModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('renameModal')">&times;</span>
            <h3><i class="fas fa-i-cursor"></i> Umbenennen</h3>
            <div class="form-group">
                <label>Neuer Name</label>
                <input type="text" id="rename-input" placeholder="Neuer Name">
            </div>
            <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="renameItem()">
                    <i class="fas fa-check"></i> Umbenennen
                </button>
                <button class="btn btn-secondary" onclick="closeModal('renameModal')">Abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Modal for File Editor -->
    <div id="fileEditorModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeModal('fileEditorModal')">&times;</span>
            <h3>
                <i class="fas fa-edit"></i>
                <span id="editor-file-name">Datei bearbeiten</span>
            </h3>
            <div class="file-editor">
                <textarea id="file-editor-content" placeholder="Dateiinhalt wird geladen..."></textarea>
            </div>
            <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
                <button class="btn btn-success" onclick="saveFileContent()">
                    <i class="fas fa-save"></i> Speichern
                </button>
                <button class="btn btn-secondary" onclick="closeModal('fileEditorModal')">Abbrechen</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
